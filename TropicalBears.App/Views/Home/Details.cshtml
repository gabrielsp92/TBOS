@model TropicalBears.Model.DataBase.Model.Produto

@{
    ViewBag.Title = "Details";
}


<div>
    
    <div class="row">
        <hr />
        <div class="col-lg-6">
            <h2>@Model.Nome</h2>
            @if (!Model.Promocao)
            {
                <h4>R$@Model.Preco</h4>
                <p>@Model.Descricao</p>
            }
            
                @if (Model.Promocao)
                {
                    <h4><span style="text-decoration:line-through;color:red">R$@Model.Preco</span> R$@Model.PrecoPromocao</h4>
                    <p>@Model.Descricao</p>
                }
                
            <a href="#" class="btn btn-default btn-sm">Adicionar Ao Carrinho <span class="glyphicon glyphicon-shopping-cart" ></span></a>
            <hr />
            <div class="row">
                <div class="col-lg-6"><h4>Avaliações:</h4>
                <p><span style="color:green"><span class="glyphicon glyphicon-thumbs-up"></span> @Model.MediaAvaliacao()%</span> / <span style="color:red"><span class="glyphicon glyphicon-thumbs-down"></span> @Model.MediaAvaliacaoNegativa()%</span> </p></div>
            </div>
            <div>
                @foreach (var item in Model.Comentarios)
                {
                                            <!-- Left-aligned -->
                        <div class="media">
                        <!--  <div class="media-left">
                            <img src="img_avatar1.png" class="media-object" style="width:60px">
                          </div> -->
                          <div class="media-body">

                              @if (item.Avaliacao == "Bom")
                              {
                                  <h4><span style="font-weight:bold">@item.Usuario.Nome </span> &nbsp &nbsp <span class="glyphicon glyphicon-thumbs-up" style="color:green"></span></h4>
                              }
                              @if (item.Avaliacao == "Ruim")
                              {
                                <h4><span style="font-weight:bold">@item.Usuario.Nome </span> &nbsp &nbsp <span class="glyphicon glyphicon-thumbs-down" style="color:red"></span></h4>
                              }

                            <p>@item.Texto</p>
                          </div>
                        </div>
                }
            </div>
            <!--Checking if is logged in to post a comment-->
            
            @if (HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName] != null)
            {
                using (Html.BeginForm("SaveComment","Home",FormMethod.Post))
                {
                    <hr />
                    <h4>Avalie este produto:</h4>
                    <input type="hidden" value="@Model.Id" name="produtoID" />

                    <div class="form-group">
                        <div class="col-md-12">
                            <select name="avaliacao" class="form-control" required>
                                    <option value="Bom" selected><span class="glyphicon glyphicon-thumbs-down"></span><span style="color:green">Bom</span></option>
                                    <option value="Ruim"><span class="glyphicon glyphicon-thumbs-down"></span><span style="color:red">Ruim</span></option>
                            </select>
                        </div>
                    </div><br />

                    <div class="form-group">
                        <div class="col-md-12">
                            <textarea class="form-control" name="texto" placeholder="Comentário"></textarea>
                        </div>
                    </div><br />
                    <div class="form-group">
                        <div class="col-md-12">
                        <input type="submit" value="Enviar" class="btn btn-default" />
                    </div>
                    </div>

                }
            }


        </div>  
    <div class="col-lg-6">
    </div>

        <div class="col-md-4">
            <img src="~/Upload/@Model.Imagens.FirstOrDefault().Img" class="img-thumbnail" />
        </div>
    </div>
    </div>
   